(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd2d5570"],{"057f":function(t,a,n){var e=n("fc6a"),r=n("241c").f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return r(t)}catch(a){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==i.call(t)?c(t):r(e(t))}},"0ccb":function(t,a,n){var e=n("50c4"),r=n("1148"),i=n("1d80"),o=Math.ceil,c=function(t){return function(a,n,c){var s,u,f=String(i(a)),d=f.length,l=void 0===c?" ":String(c),h=e(n);return h<=d||""==l?f:(s=h-d,u=r.call(l,o(s/l.length)),u.length>s&&(u=u.slice(0,s)),t?f+u:u+f)}};t.exports={start:c(!1),end:c(!0)}},1148:function(t,a,n){"use strict";var e=n("a691"),r=n("1d80");t.exports=function(t){var a=String(r(this)),n="",i=e(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(a+=a))1&i&&(n+=a);return n}},"159b":function(t,a,n){var e=n("da84"),r=n("fdbc"),i=n("17c2"),o=n("9112");for(var c in r){var s=e[c],u=s&&s.prototype;if(u&&u.forEach!==i)try{o(u,"forEach",i)}catch(f){u.forEach=i}}},"17c2":function(t,a,n){"use strict";var e=n("b727").forEach,r=n("a640"),i=r("forEach");t.exports=i?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,a,n){"use strict";var e=n("6eeb"),r=n("825a"),i=n("d039"),o=n("ad6d"),c="toString",s=RegExp.prototype,u=s[c],f=i((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=c;(f||d)&&e(RegExp.prototype,c,(function(){var t=r(this),a=String(t.source),n=t.flags,e=String(void 0===n&&t instanceof RegExp&&!("flags"in s)?o.call(t):n);return"/"+a+"/"+e}),{unsafe:!0})},"4d90":function(t,a,n){"use strict";var e=n("23e7"),r=n("0ccb").start,i=n("9a0c");e({target:"String",proto:!0,forced:i},{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"4f8c":function(t,a,n){},"746f":function(t,a,n){var e=n("428f"),r=n("5135"),i=n("e538"),o=n("9bf2").f;t.exports=function(t){var a=e.Symbol||(e.Symbol={});r(a,t)||o(a,t,{value:i.f(t)})}},"9a0c":function(t,a,n){var e=n("342f");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(e)},a15b:function(t,a,n){"use strict";var e=n("23e7"),r=n("44ad"),i=n("fc6a"),o=n("a640"),c=[].join,s=r!=Object,u=o("join",",");e({target:"Array",proto:!0,forced:s||!u},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},a4d3:function(t,a,n){"use strict";var e=n("23e7"),r=n("da84"),i=n("d066"),o=n("c430"),c=n("83ab"),s=n("4930"),u=n("fdbf"),f=n("d039"),d=n("5135"),l=n("e8b5"),h=n("861d"),g=n("825a"),v=n("7b0b"),p=n("fc6a"),b=n("c04e"),y=n("5c6c"),m=n("7c73"),w=n("df75"),S=n("241c"),D=n("057f"),x=n("7418"),O=n("06cf"),j=n("9bf2"),E=n("d1e7"),C=n("9112"),A=n("6eeb"),I=n("5692"),L=n("f772"),k=n("d012"),R=n("90e3"),J=n("b622"),_=n("e538"),P=n("746f"),M=n("d44e"),N=n("69f3"),U=n("b727").forEach,T=L("hidden"),$="Symbol",z="prototype",F=J("toPrimitive"),H=N.set,W=N.getterFor($),q=Object[z],B=r.Symbol,X=i("JSON","stringify"),Y=O.f,Q=j.f,V=D.f,G=E.f,K=I("symbols"),Z=I("op-symbols"),tt=I("string-to-symbol-registry"),at=I("symbol-to-string-registry"),nt=I("wks"),et=r.QObject,rt=!et||!et[z]||!et[z].findChild,it=c&&f((function(){return 7!=m(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(t,a,n){var e=Y(q,a);e&&delete q[a],Q(t,a,n),e&&t!==q&&Q(q,a,e)}:Q,ot=function(t,a){var n=K[t]=m(B[z]);return H(n,{type:$,tag:t,description:a}),c||(n.description=a),n},ct=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof B},st=function(t,a,n){t===q&&st(Z,a,n),g(t);var e=b(a,!0);return g(n),d(K,e)?(n.enumerable?(d(t,T)&&t[T][e]&&(t[T][e]=!1),n=m(n,{enumerable:y(0,!1)})):(d(t,T)||Q(t,T,y(1,{})),t[T][e]=!0),it(t,e,n)):Q(t,e,n)},ut=function(t,a){g(t);var n=p(a),e=w(n).concat(gt(n));return U(e,(function(a){c&&!dt.call(n,a)||st(t,a,n[a])})),t},ft=function(t,a){return void 0===a?m(t):ut(m(t),a)},dt=function(t){var a=b(t,!0),n=G.call(this,a);return!(this===q&&d(K,a)&&!d(Z,a))&&(!(n||!d(this,a)||!d(K,a)||d(this,T)&&this[T][a])||n)},lt=function(t,a){var n=p(t),e=b(a,!0);if(n!==q||!d(K,e)||d(Z,e)){var r=Y(n,e);return!r||!d(K,e)||d(n,T)&&n[T][e]||(r.enumerable=!0),r}},ht=function(t){var a=V(p(t)),n=[];return U(a,(function(t){d(K,t)||d(k,t)||n.push(t)})),n},gt=function(t){var a=t===q,n=V(a?Z:p(t)),e=[];return U(n,(function(t){!d(K,t)||a&&!d(q,t)||e.push(K[t])})),e};if(s||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,a=R(t),n=function(t){this===q&&n.call(Z,t),d(this,T)&&d(this[T],a)&&(this[T][a]=!1),it(this,a,y(1,t))};return c&&rt&&it(q,a,{configurable:!0,set:n}),ot(a,t)},A(B[z],"toString",(function(){return W(this).tag})),A(B,"withoutSetter",(function(t){return ot(R(t),t)})),E.f=dt,j.f=st,O.f=lt,S.f=D.f=ht,x.f=gt,_.f=function(t){return ot(J(t),t)},c&&(Q(B[z],"description",{configurable:!0,get:function(){return W(this).description}}),o||A(q,"propertyIsEnumerable",dt,{unsafe:!0}))),e({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:B}),U(w(nt),(function(t){P(t)})),e({target:$,stat:!0,forced:!s},{for:function(t){var a=String(t);if(d(tt,a))return tt[a];var n=B(a);return tt[a]=n,at[n]=a,n},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(d(at,t))return at[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),e({target:"Object",stat:!0,forced:!s,sham:!c},{create:ft,defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:lt}),e({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:ht,getOwnPropertySymbols:gt}),e({target:"Object",stat:!0,forced:f((function(){x.f(1)}))},{getOwnPropertySymbols:function(t){return x.f(v(t))}}),X){var vt=!s||f((function(){var t=B();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))}));e({target:"JSON",stat:!0,forced:vt},{stringify:function(t,a,n){var e,r=[t],i=1;while(arguments.length>i)r.push(arguments[i++]);if(e=a,(h(a)||void 0!==t)&&!ct(t))return l(a)||(a=function(t,a){if("function"==typeof e&&(a=e.call(this,t,a)),!ct(a))return a}),r[1]=a,X.apply(null,r)}})}B[z][F]||C(B[z],F,B[z].valueOf),M(B,$),k[T]=!0},a630:function(t,a,n){var e=n("23e7"),r=n("4df4"),i=n("1c7e"),o=!i((function(t){Array.from(t)}));e({target:"Array",stat:!0,forced:o},{from:r})},aa8c:function(t,a,n){"use strict";n("4f8c")},b0c0:function(t,a,n){var e=n("83ab"),r=n("9bf2").f,i=Function.prototype,o=i.toString,c=/^\s*function ([^ (]*)/,s="name";e&&!(s in i)&&r(i,s,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},bf19:function(t,a,n){"use strict";var e=n("23e7");e({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},d28b:function(t,a,n){var e=n("746f");e("iterator")},e01a:function(t,a,n){"use strict";var e=n("23e7"),r=n("83ab"),i=n("da84"),o=n("5135"),c=n("861d"),s=n("9bf2").f,u=n("e893"),f=i.Symbol;if(r&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var d={},l=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),a=this instanceof l?new f(t):void 0===t?f():f(t);return""===t&&(d[a]=!0),a};u(l,f);var h=l.prototype=f.prototype;h.constructor=l;var g=h.toString,v="Symbol(test)"==String(f("test")),p=/^Symbol\((.*)\)[^)]+$/;s(h,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,a=g.call(t);if(o(d,t))return"";var n=v?a.slice(7,-1):a.replace(p,"$1");return""===n?void 0:n}}),e({global:!0,forced:!0},{Symbol:l})}},e1aa:function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"home"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content",style:"background:white"},[n("canvas",{ref:"canvas",attrs:{id:"canvas",width:"800",height:"800"}})]),n("div",{staticClass:"operations"},[n("div",{staticStyle:{height:"800px",margin:"0 auto"}},[t._v(" 1.选择需要加密的文件,或手绘后再执行第二步 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.inputFile}},[t._v(" 选择加密内容(图片) ")]),t._v(" 2.保存加密画布信息 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"primary",size:"default"},on:{click:t.saveHiddenImageData}},[t._v(" 保存隐写的信息 ")]),t._v(" 3.选择需要隐写到的目标图片 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.inputFile}},[t._v(" 选择文件 ")]),t._v(" 4.开始加密 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"primary",size:"default"},on:{click:t.drawHiddenData}},[t._v(" 开始加密 ")]),t._v(" 5.加密完成,点击生成图片下载加密后的图片 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.exportCanvas}},[t._v(" 导出加密后的图片 ")]),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"warning",size:"default"},on:{click:t.reload}},[t._v(" 重置 ")])],1)])])},r=[];function i(t,a){(null==a||a>t.length)&&(a=t.length);for(var n=0,e=new Array(a);n<a;n++)e[n]=t[n];return e}function o(t){if(Array.isArray(t))return i(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function c(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function s(t,a){if(t){if("string"===typeof t)return i(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,a):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t){return o(t)||c(t)||s(t)||u()}var d=n("1da1"),l=(n("ac1f"),n("1276"),n("4d90"),n("25f0"),n("159b"),n("a15b"),n("bf19"),n("96cf"),n("7a94")),h=n("0a07"),g={components:{},data:function(){return{loading:!1,ctx:null,canvas:null,targetData:null,hiddenData:null,canvasJson:{}}},inject:["contentReload"],watch:{$route:{handler:function(){this.contentReload()},immediate:!1}},mounted:function(){this.initCanvas()},methods:{initCanvas:function(){this.canvas=new l["fabric"].Canvas("canvas",{isDrawingMode:!0,selectable:!1,selection:!1,hoverCursor:"pointer",devicePixelRatio:!0,stroke:"lightgreen",strokeWidth:4}),this.ctx=this.canvas.getContext("2d"),this.canvas.freeDrawingBrush.color="blue",this.canvas.freeDrawingBrush.width=20},inputFile:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(h["a"])();case 2:n=a.sent,t.drawImage(n[0]);case 4:case"end":return a.stop()}}),a)})))()},drawImage:function(t){var a=this;this.loading=!0,l["fabric"].Image.fromURL(t,(function(t){var n=t.height>t.width?a.canvas.width/t.width:a.canvas.height/t.height;t.set({left:a.canvas.width/2,originX:"center",originY:"center",top:a.canvas.height/2,scaleX:n,scaleY:n,selectable:!1}),t.on("added",(function(t){setTimeout((function(){a.getCanvasData()}),500)})),a.canvas.add(t)}))},saveHiddenImageData:function(){var t=this,a=document.createElement("canvas"),n=a.getContext("2d");a.width=Math.floor(Math.sqrt(this.canvas.width*this.canvas.height/8)),a.height=Math.floor(Math.sqrt(this.canvas.width*this.canvas.height/8));var e=new Image;e.src=this.canvas.toDataURL("image/png"),e.onload=function(){n.drawImage(e,0,0,a.width,a.height),t.hiddenData=n.getImageData(0,0,a.width,a.height),t.hiddenData.binaryList=Array.from(t.hiddenData.data,(function(t){return t=t.toString(2).padStart(8,"0").split(""),t})),console.log(t.hiddenData,"hiddenData"),t.$message({type:"success",message:"保存成功!请选择目标图片~"}),t.canvas.clear()}},getCanvasData:function(){var t=this;function a(t){return t=t>254?t-1:t,t=t%2==1?t-1:t,t}this.targetData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.targetData.binaryList=Array.from(this.targetData.data,(function(n,e){return t.targetData.data[e]=a(t.targetData.data[e]),n=a(n).toString(2).padStart(8,"0").split(""),n})),console.log(this.targetData),this.loading=!1},drawHiddenData:function(){for(var t=this,a=[],n=0;n<this.hiddenData.binaryList.length;n++)a.push.apply(a,f(this.hiddenData.binaryList[n]));console.log(a,"bigHiddenList"),this.targetData.binaryList.forEach((function(t,n){a[n]&&(t[7]=a[n])})),this.canvas.clear(),this.targetData.data.forEach((function(a,n){t.targetData.data[n]=parseInt(t.targetData.binaryList[n].join(""),2)}));var e=document.createElement("canvas");e.width=800,e.height=800;var r=e.getContext("2d");r.putImageData(this.targetData,0,0),l["fabric"].Image.fromURL(e.toDataURL(),(function(a){t.canvas.clear(),t.canvas.add(a),t.canvas.renderAll()})),this.$message({type:"success",message:"加密成功!"}),console.log(this.hiddenData.binaryList,"binaryList"),console.log(this.targetData.binaryList,"targetData"),console.log(this.hiddenData,"hiddenData"),console.log(this.targetData,"targetData")},loadhiddenData:function(){console.log(this.hiddenData,"this.hiddenData"),this.ctx.putImageData(this.hiddenData,0,0)},canvasToJson:function(){var t=this.canvas.toObject();console.log(t,"obj ")},canvasToObj:function(){this.canvasJson=this.canvas.toJSON(),console.log(this.canvasJson,"this.canvasJson ")},loadJsonToCanvas:function(){console.log(this.canvasJson,"this.canvasJson ")},reload:function(){this.canvas.clear()},exportCanvas:function(){var t=this.canvas.toDataURL({width:this.canvas.width,height:this.canvas.height,left:0,top:0,format:"png"}),a=document.createElement("a");a.download="canvas.png",a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},v=g,p=(n("aa8c"),n("2877")),b=Object(p["a"])(v,e,r,!1,null,"39dac86f",null);a["default"]=b.exports},e538:function(t,a,n){var e=n("b622");a.f=e},fb6a:function(t,a,n){"use strict";var e=n("23e7"),r=n("861d"),i=n("e8b5"),o=n("23cb"),c=n("50c4"),s=n("fc6a"),u=n("8418"),f=n("b622"),d=n("1dde"),l=d("slice"),h=f("species"),g=[].slice,v=Math.max;e({target:"Array",proto:!0,forced:!l},{slice:function(t,a){var n,e,f,d=s(this),l=c(d.length),p=o(t,l),b=o(void 0===a?l:a,l);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return g.call(d,p,b);for(e=new(void 0===n?Array:n)(v(b-p,0)),f=0;p<b;p++,f++)p in d&&u(e,f,d[p]);return e.length=f,e}})}}]);
//# sourceMappingURL=chunk-fd2d5570.32539357.js.map