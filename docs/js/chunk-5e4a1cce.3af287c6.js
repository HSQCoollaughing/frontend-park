(window["webpackJsonp_frontend-park"]=window["webpackJsonp_frontend-park"]||[]).push([["chunk-5e4a1cce"],{"0ccb":function(t,a,n){var e=n("e330"),i=n("50c4"),r=n("577e"),o=n("1148"),c=n("1d80"),s=e(o),u=e("".slice),l=Math.ceil,d=function(t){return function(a,n,e){var o,d,h=r(c(a)),f=i(n),g=h.length,v=void 0===e?" ":r(e);return f<=g||""==v?h:(o=f-g,d=s(v,l(o/v.length)),d.length>o&&(d=u(d,0,o)),t?h+d:d+h)}};t.exports={start:d(!1),end:d(!0)}},1148:function(t,a,n){"use strict";var e=n("da84"),i=n("5926"),r=n("577e"),o=n("1d80"),c=e.RangeError;t.exports=function(t){var a=r(o(this)),n="",e=i(t);if(e<0||e==1/0)throw c("Wrong number of repetitions");for(;e>0;(e>>>=1)&&(a+=a))1&e&&(n+=a);return n}},1276:function(t,a,n){"use strict";var e=n("2ba4"),i=n("c65b"),r=n("e330"),o=n("d784"),c=n("44e7"),s=n("825a"),u=n("1d80"),l=n("4840"),d=n("8aa5"),h=n("50c4"),f=n("577e"),g=n("dc4a"),v=n("4dae"),p=n("14c3"),b=n("9263"),m=n("9f7f"),y=n("d039"),w=m.UNSUPPORTED_Y,x=4294967295,D=Math.min,E=[].push,S=r(/./.exec),R=r(E),I=r("".slice),C=!y((function(){var t=/(?:)/,a=t.exec;t.exec=function(){return a.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));o("split",(function(t,a,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=f(u(this)),o=void 0===n?x:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!c(t))return i(a,r,t,o);var s,l,d,h=[],g=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,g+"g");while(s=i(b,m,r)){if(l=m.lastIndex,l>p&&(R(h,I(r,p,s.index)),s.length>1&&s.index<r.length&&e(E,h,v(s,1)),d=s[0].length,p=l,h.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return p===r.length?!d&&S(m,"")||R(h,""):R(h,I(r,p)),h.length>o?v(h,0,o):h}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(a,this,t,n)}:a,[function(a,n){var e=u(this),o=void 0==a?void 0:g(a,t);return o?i(o,a,e,n):i(r,f(e),a,n)},function(t,e){var i=s(this),o=f(t),c=n(r,i,o,e,r!==a);if(c.done)return c.value;var u=l(i,RegExp),g=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(w?"g":"y"),b=new u(w?"^(?:"+i.source+")":i,v),m=void 0===e?x:e>>>0;if(0===m)return[];if(0===o.length)return null===p(b,o)?[o]:[];var y=0,E=0,S=[];while(E<o.length){b.lastIndex=w?0:E;var C,k=p(b,w?I(o,E):o);if(null===k||(C=D(h(b.lastIndex+(w?E:0)),o.length))===y)E=d(o,E,g);else{if(R(S,I(o,y,E)),S.length===m)return S;for(var L=1;L<=k.length-1;L++)if(R(S,k[L]),S.length===m)return S;E=y=C}}return R(S,I(o,y)),S}]}),!C,w)},"14c3":function(t,a,n){var e=n("da84"),i=n("c65b"),r=n("825a"),o=n("1626"),c=n("c6b6"),s=n("9263"),u=e.TypeError;t.exports=function(t,a){var n=t.exec;if(o(n)){var e=i(n,t,a);return null!==e&&r(e),e}if("RegExp"===c(t))return i(s,t,a);throw u("RegExp#exec called on incompatible receiver")}},"159b":function(t,a,n){var e=n("da84"),i=n("fdbc"),r=n("785a"),o=n("17c2"),c=n("9112"),s=function(t){if(t&&t.forEach!==o)try{c(t,"forEach",o)}catch(a){t.forEach=o}};for(var u in i)i[u]&&s(e[u]&&e[u].prototype);s(r)},"17c2":function(t,a,n){"use strict";var e=n("b727").forEach,i=n("a640"),r=i("forEach");t.exports=r?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},"25f0":function(t,a,n){"use strict";var e=n("e330"),i=n("5e77").PROPER,r=n("6eeb"),o=n("825a"),c=n("3a9b"),s=n("577e"),u=n("d039"),l=n("ad6d"),d="toString",h=RegExp.prototype,f=h[d],g=e(l),v=u((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),p=i&&f.name!=d;(v||p)&&r(RegExp.prototype,d,(function(){var t=o(this),a=s(t.source),n=t.flags,e=s(void 0===n&&c(h,t)&&!("flags"in h)?g(t):n);return"/"+a+"/"+e}),{unsafe:!0})},2909:function(t,a,n){"use strict";function e(t,a){(null==a||a>t.length)&&(a=t.length);for(var n=0,e=new Array(a);n<a;n++)e[n]=t[n];return e}function i(t){if(Array.isArray(t))return e(t)}n.d(a,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0"),n("ac1f"),n("00b4");function o(t,a){if(t){if("string"===typeof t)return e(t,a);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,a):void 0}}n("d9e2");function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return i(t)||r(t)||o(t)||c()}},"44e7":function(t,a,n){var e=n("861d"),i=n("c6b6"),r=n("b622"),o=r("match");t.exports=function(t){var a;return e(t)&&(void 0!==(a=t[o])?!!a:"RegExp"==i(t))}},"4d90":function(t,a,n){"use strict";var e=n("23e7"),i=n("0ccb").start,r=n("9a0c");e({target:"String",proto:!0,forced:r},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"5cf0":function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"home"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content",style:"background:white"},[n("canvas",{ref:"canvas",attrs:{id:"canvas",width:"800",height:"800"}})]),n("div",{staticClass:"operations"},[n("div",{staticStyle:{height:"800px",margin:"0 auto"}},[t._v(" 1.选择需要加密的文件,或手绘后再执行第二步 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.inputFile}},[t._v(" 选择加密内容(图片) ")]),t._v(" 2.保存加密画布信息 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"primary",size:"default"},on:{click:t.saveHiddenImageData}},[t._v(" 保存隐写的信息 ")]),t._v(" 3.选择需要隐写到的目标图片 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.inputFile}},[t._v(" 选择文件 ")]),t._v(" 4.开始加密 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"primary",size:"default"},on:{click:t.drawHiddenData}},[t._v(" 开始加密 ")]),t._v(" 5.加密完成,点击生成图片下载加密后的图片 "),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"success",size:"default"},on:{click:t.exportCanvas}},[t._v(" 导出加密后的图片 ")]),n("el-button",{staticStyle:{width:"100%",margin:"10px auto"},attrs:{type:"warning",size:"default"},on:{click:t.reload}},[t._v(" 重置 ")])],1)])])},i=[],r=n("2909"),o=n("1da1"),c=(n("a630"),n("3ca3"),n("ac1f"),n("1276"),n("4d90"),n("d3b7"),n("25f0"),n("159b"),n("a15b"),n("bf19"),n("96cf"),n("7a94")),s=n("0a07"),u={components:{},data:function(){return{loading:!1,ctx:null,canvas:null,targetData:null,hiddenData:null,canvasJson:{}}},inject:["contentReload"],watch:{$route:{handler:function(){this.contentReload()},immediate:!1}},mounted:function(){this.initCanvas()},methods:{initCanvas:function(){this.canvas=new c["fabric"].Canvas("canvas",{isDrawingMode:!0,selectable:!1,selection:!1,hoverCursor:"pointer",devicePixelRatio:!0,stroke:"lightgreen",strokeWidth:4}),this.ctx=this.canvas.getContext("2d"),this.canvas.freeDrawingBrush.color="blue",this.canvas.freeDrawingBrush.width=20},inputFile:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["a"])();case 2:n=a.sent,t.drawImage(n[0]);case 4:case"end":return a.stop()}}),a)})))()},drawImage:function(t){var a=this;this.loading=!0,c["fabric"].Image.fromURL(t,(function(t){var n=t.height>t.width?a.canvas.width/t.width:a.canvas.height/t.height;t.set({left:a.canvas.width/2,originX:"center",originY:"center",top:a.canvas.height/2,scaleX:n,scaleY:n,selectable:!1}),t.on("added",(function(t){setTimeout((function(){a.getCanvasData()}),500)})),a.canvas.add(t)}))},saveHiddenImageData:function(){var t=this,a=document.createElement("canvas"),n=a.getContext("2d");a.width=Math.floor(Math.sqrt(this.canvas.width*this.canvas.height/8)),a.height=Math.floor(Math.sqrt(this.canvas.width*this.canvas.height/8));var e=new Image;e.src=this.canvas.toDataURL("image/png"),e.onload=function(){n.drawImage(e,0,0,a.width,a.height),t.hiddenData=n.getImageData(0,0,a.width,a.height),t.hiddenData.binaryList=Array.from(t.hiddenData.data,(function(t){return t=t.toString(2).padStart(8,"0").split(""),t})),console.log(t.hiddenData,"hiddenData"),t.$message({type:"success",message:"保存成功!请选择目标图片~"}),t.canvas.clear()}},getCanvasData:function(){var t=this;function a(t){return t=t>254?t-1:t,t=t%2==1?t-1:t,t}this.targetData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.targetData.binaryList=Array.from(this.targetData.data,(function(n,e){return t.targetData.data[e]=a(t.targetData.data[e]),n=a(n).toString(2).padStart(8,"0").split(""),n})),console.log(this.targetData),this.loading=!1},drawHiddenData:function(){for(var t=this,a=[],n=0;n<this.hiddenData.binaryList.length;n++)a.push.apply(a,Object(r["a"])(this.hiddenData.binaryList[n]));console.log(a,"bigHiddenList"),this.targetData.binaryList.forEach((function(t,n){a[n]&&(t[7]=a[n])})),this.canvas.clear(),this.targetData.data.forEach((function(a,n){t.targetData.data[n]=parseInt(t.targetData.binaryList[n].join(""),2)}));var e=document.createElement("canvas");e.width=800,e.height=800;var i=e.getContext("2d");i.putImageData(this.targetData,0,0),c["fabric"].Image.fromURL(e.toDataURL(),(function(a){t.canvas.clear(),t.canvas.add(a),t.canvas.renderAll()})),this.$message({type:"success",message:"加密成功!"}),console.log(this.hiddenData.binaryList,"binaryList"),console.log(this.targetData.binaryList,"targetData"),console.log(this.hiddenData,"hiddenData"),console.log(this.targetData,"targetData")},loadhiddenData:function(){console.log(this.hiddenData,"this.hiddenData"),this.ctx.putImageData(this.hiddenData,0,0)},canvasToJson:function(){var t=this.canvas.toObject();console.log(t,"obj ")},canvasToObj:function(){this.canvasJson=this.canvas.toJSON(),console.log(this.canvasJson,"this.canvasJson ")},loadJsonToCanvas:function(){console.log(this.canvasJson,"this.canvasJson ")},reload:function(){this.canvas.clear()},exportCanvas:function(){var t=this.canvas.toDataURL({width:this.canvas.width,height:this.canvas.height,left:0,top:0,format:"png"}),a=document.createElement("a");a.download="canvas.png",a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},l=u,d=(n("5d70"),n("2877")),h=Object(d["a"])(l,e,i,!1,null,"9b6fa8e6",null);a["default"]=h.exports},"5d70":function(t,a,n){"use strict";n("cb3c")},"8aa5":function(t,a,n){"use strict";var e=n("6547").charAt;t.exports=function(t,a,n){return a+(n?e(t,a).length:1)}},"9a0c":function(t,a,n){var e=n("342f");t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(e)},a15b:function(t,a,n){"use strict";var e=n("23e7"),i=n("e330"),r=n("44ad"),o=n("fc6a"),c=n("a640"),s=i([].join),u=r!=Object,l=c("join",",");e({target:"Array",proto:!0,forced:u||!l},{join:function(t){return s(o(this),void 0===t?",":t)}})},a640:function(t,a,n){"use strict";var e=n("d039");t.exports=function(t,a){var n=[][t];return!!n&&e((function(){n.call(null,a||function(){return 1},1)}))}},bf19:function(t,a,n){"use strict";var e=n("23e7"),i=n("c65b");e({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})},cb3c:function(t,a,n){},d784:function(t,a,n){"use strict";n("ac1f");var e=n("e330"),i=n("6eeb"),r=n("9263"),o=n("d039"),c=n("b622"),s=n("9112"),u=c("species"),l=RegExp.prototype;t.exports=function(t,a,n,d){var h=c(t),f=!o((function(){var a={};return a[h]=function(){return 7},7!=""[t](a)})),g=f&&!o((function(){var a=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return a=!0,null},n[h](""),!a}));if(!f||!g||n){var v=e(/./[h]),p=a(h,""[t],(function(t,a,n,i,o){var c=e(t),s=a.exec;return s===r||s===l.exec?f&&!o?{done:!0,value:v(a,n,i)}:{done:!0,value:c(n,a,i)}:{done:!1}}));i(String.prototype,t,p[0]),i(l,h,p[1])}d&&s(l[h],"sham",!0)}}}]);
//# sourceMappingURL=chunk-5e4a1cce.3af287c6.js.map